<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments/head :: head(#{products.products.list})"></head>

<body>
<div th:replace="fragments/menu :: godMenu"></div>

<div th:if="${not productListPages.hasContent()}" th:text="#{products.products.list.isempty}"></div>
<div th:if="${productListPages.hasContent()}" class="container">
    <span th:text="#{products.all.elements} +' ' +${productListPages.totalElements}"></span><br>
    <span th:text="#{products.all.pages} +' ' +${productListPages.totalPages}"></span><br>

    <!--PAGINATION-->
    <div th:replace="fragments/pagination :: paginationProducts"></div>

    <!--   TABLE HEADER-->
    <table class="table table-primary">
        <thead>
        <tr>
            <th>
                <a
                        th:with="direction=${productListPages.sort.getOrderFor('name')?.direction}"
                        th:href="@{/product/list(sort='name,' + ${direction?.name() eq 'ASC' ? 'DESC' : 'ASC'} )}">
                    <span th:text="#{product.word}"></span>
                    <i class="fa-solid"
                       th:classappend="${direction?.name() eq 'ASC' ? 'fa-arrow-down-a-z' : 'fa-arrow-up-z-a'}"
                       th:if="${direction ne null}">

                    </i>
                </a>
            </th>
            <th>
                <a
                        th:with="direction=${productListPages.sort.getOrderFor('proteins')?.direction}"
                        th:href="@{/product/list(sort='proteins,' + ${direction?.name() eq 'ASC' ? 'DESC' : 'ASC'} )}">
                    <span th:text="#{proteins}"></span>
                    <i class="fa-solid"
                       th:classappend="${direction?.name() eq 'ASC' ? 'fa-arrow-down-1-9' : 'fa-arrow-up-9-1'}"
                       th:if="${direction ne null}">

                    </i>
                </a>
            </th>
            <th>
                <a
                        th:with="direction=${productListPages.sort.getOrderFor('carbohydrates')?.direction}"
                        th:href="@{/product/list(sort='carbohydrates,' + ${direction?.name() eq 'ASC' ? 'DESC' : 'ASC'} )}">
                    <span th:text="#{carbohydrates}"></span>
                    <i class="fa-solid"
                       th:classappend="${direction?.name() eq 'ASC' ? 'fa-arrow-down-1-9' : 'fa-arrow-up-9-1'}"
                       th:if="${direction ne null}">

                    </i>
                </a>
            </th>
            <th>
                <a
                        th:with="direction=${productListPages.sort.getOrderFor('fat')?.direction}"
                        th:href="@{/product/list(sort='fat,' + ${direction?.name() eq 'ASC' ? 'DESC' : 'ASC'} )}">
                    <span th:text="#{fat}"></span>
                    <i class="fa-solid"
                       th:classappend="${direction?.name() eq 'ASC' ? 'fa-arrow-down-1-9' : 'fa-arrow-up-9-1'}"
                       th:if="${direction ne null}">

                    </i>
                </a>
            </th>
            <th>
                <a
                        th:with="direction=${productListPages.sort.getOrderFor('energyValueKcal')?.direction}"
                        th:href="@{/product/list(sort='energyValueKcal,' + ${direction?.name() eq 'ASC' ? 'DESC' : 'ASC'} )}">
                    <span th:text="#{energy.value.kcal}"></span>
                    <i class="fa-solid"
                       th:classappend="${direction?.name() eq 'ASC' ? 'fa-arrow-down-1-9' : 'fa-arrow-up-9-1'}"
                       th:if="${direction ne null}">

                    </i>
                </a>
            </th>
            <th></th>
        </tr>
        <!--   TABLE CONTENT-->
        </thead>
        <tbody>
        <tr th:each="product: ${productListPages}">
            <td><a th:href="@{/product/{uuid}/update(uuid=${product.uuid})}" th:text="${product.name}"></a></td>
            <td th:text="${product.proteins}"></td>
            <td th:text="${product.carbohydrates}"></td>
            <td th:text="${product.fat}"></td>
            <td th:text="${product.energyValueKcal}"></td>
            <td><a class="btn btn-danger" th:href="@{/product/{uuid}/delete(uuid=${product.uuid})}"
                   th:text="#{delete}"></a></td>
        </tr>
        </tbody>
    </table>

    <!--PAGINATION-->
    <div th:replace="fragments/pagination :: paginationProducts"></div>

</div>

</body>
</html>