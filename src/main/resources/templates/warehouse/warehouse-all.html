<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
>

<head th:replace="fragments/head :: head(#{warehouse.all.title})"></head>

<body>
<div th:replace="fragments/menu :: godMenu"></div>

<h1 th:text="#{warehouse.all.title}"></h1>

<div class="container">
    <div class="container" sec:authorize="hasAnyRole('DIETIST')">
        <a class="btn btn-success" th:href="@{'/warehouse/warehouse-record'}" role="button"
           th:text="#{warehouse.add.new.record}"></a>
    </div>

    <div th:if="${warehousePages.hasContent()}" class="container">
        <span th:text="#{warehouse.all.elements} +' ' +${warehousePages.totalElements}"></span><br>
        <span th:text="#{warehouse.all.pages} +' ' +${warehousePages.totalPages}"></span><br>

        <div class="alert alert-success" role="alert"
             th:if="${message} ne null and ${message} ne ''"
             th:text="${message.toString()}"
        ></div>

        <!--    PAGINATION-->
        <div th:replace="fragments/pagination :: pagination(object=${warehousePages}, link=@{/warehouse})"></div>

        <!--   TABLE HEADER-->
        <table class="table table-primary">
            <thead>
            <tr>
                <th scope="col"><a th:replace="
            fragments/table :: sortedColumnProducts(data=${warehousePages},
             name='productId',
              path=@{/warehouse},
               sortUp='fa-arrow-up-z-a',
                sortDown='fa-arrow-down-a-z',
                 fieldName=#{warehouse.records.word})"></a></th>

                <th scope="col"><a th:replace="
            fragments/table :: sortedColumnProducts(data=${warehousePages},
             name='amount',
              path=@{/warehouse},
               sortUp='fa-arrow-up-9-1',
                sortDown='fa-arrow-down-1-9',
                 fieldName=#{warehouse.amount})"></a></th>

                <th scope="col"><a th:replace="
            fragments/table :: sortedColumnProducts(data=${warehousePages},
             name='invoice',
              path=@{/warehouse},
               sortUp='fa-arrow-up-9-1',
                sortDown='fa-arrow-down-1-9',
                 fieldName=#{warehouse.invoice})"></a></th>

                <th></th>
            </tr>
            <!--   TABLE CONTENT-->
            </thead>
            <tbody>
            <tr th:each="warehouse: ${warehousePages}">
                <td><a th:href="@{/warehouse/{uuid}/update(uuid=${warehouse.uuid})}"
                       th:text="${warehouse.productName}"></a></td>
                <td th:text="${warehouse.amount}"></td>
                <td th:text="${warehouse.invoice}"></td>
                <td><a class="btn btn-danger"
                       sec:authorize="hasAnyRole('DIETIST')"
                       th:href="@{/warehouse/{uuid}/delete(uuid=${warehouse.uuid})}"
                       th:text="#{delete}"></a>

                    <a class="btn btn-warning"
                       sec:authorize="hasAnyRole('CULINARY','DIETIST')"
                       th:href="@{/warehouse/{uuid}/writeOff(uuid=${warehouse.uuid})}"
                       th:text="#{writeOff.writeOff}"></a>
                </td>
            </tr>
            </tbody>
        </table>

        <!--PAGINATION-->
        <div th:replace="fragments/pagination :: pagination(object=${warehousePages}, link=@{/warehouse})"></div>

    </div>
</div>

</body>
</html>